drop table consumer;
drop table consumer;
drop table bill;
drop table complaint;
drop table login;
drop table payment;
select * from complaint;
drop table consumer_details;
-- consumer or registration table

create table consumer_details(consumer_number bigint, meter_number varchar(10));
INSERT INTO consumer_details (consumer_number, meter_number)
VALUES 
    (4802365910284, 'MTRX9012'),
    (7823401597463, 'MTRY3456'),
    (1594702836157, 'MTRZ7890'),
    (2039485761923, 'MTRW4567'),
    (3674901259834, 'MTRV1234'),
    (5729834061478, 'MTRU5678'),
    (4938271604923, 'MTRT8901'),
    (8501923746509, 'MTRS2345'),
    (6142378905612, 'MTRR6789'),
    (9754208364517, 'MTRQ0123');

create table consumer (
		consumer_id bigint primary key,
		meter_number varchar(20),
		title varchar(20),
		consumer_name varchar(100),
		email varchar(50),
		mobile bigint,
		gender varchar(20),
		user_name varchar(50),
		password varchar(50)
);

-- login table
create table login (
		username varchar(50) primary key,
		password varchar(50),
		consumer_id bigint,
		status varchar(20)
);

-- admin table
create table admin_login (
		username varchar(50) primary key,
		password varchar(50)
);
insert into admin_login values('admin', 'Harsha@2005');

-- bill table
create table bill (
		bill_number integer primary key,
		due_amount double,
		bill_amount double,
		due_date varchar(20),
		penalty double,
		status varchar(20),
		consumer_id bigint
);

-- payment table
create table payment (
		transaction_number integer primary key,
		bill_number integer,
		paid_amount double,
		transaction_mode varchar(50),
		transaction_date varchar(50),
		consumer_id bigint
);
		
-- complaint table
create table complaint (
		complaint_id integer primary key,
		landmark varchar(50),
		service varchar(50),
		category varchar(50),
		mobile bigint,
		contact varchar(50),
		problem varchar(200),
		address varchar(200),
		complaint_status varchar(200),
		consumer_id bigint);


alter table bill
add constraint fk_bill
foreign key (consumer_id)
references consumer (consumer_id);

alter table complaint
add constraint fk_complaint
foreign key (consumer_id)
references consumer (consumer_id);

alter table payment
add constraint fk_payment
foreign key (bill_number)
references bill (bill_number);

alter table login
add constraint fk_login
foreign key (consumer_id)
references consumer (consumer_id);

